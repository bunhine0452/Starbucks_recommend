# 모델의 로직

---

### 1. 기본 설정 및 모델 로드

먼저, 필요한 도구들을 준비합니다. 여기서는 파이썬과 그 외 몇 가지 라이브러리를 사용합니다. 그리고 컴퓨터의 성능을 최대로 활용하기 위해 사용할 수 있는 장치를 확인합니다. 우리가 사용할 언어 모델은 한국어를 잘 이해하는 KoBERT입니다. 이 모델은 한국어 텍스트를 분석하고 이해하는 데 도움을 줍니다.

### 2. 단어 계산

단어를 숫자로 변환하여 계산하는 과정입니다. 이 변환을 통해 컴퓨터는 텍스트를 더 잘 이해할 수 있습니다. 변환된 숫자를 매번 다시 계산하는 것은 비효율적이므로, 한 번 계산한 결과를 저장해두고 재사용합니다. 이렇게 하면 시간을 절약할 수 있습니다.

### 3. 사용자 입력 처리

사용자로부터 매장의 특징을 입력받습니다. 예를 들어, '조용한 분위기'나 '주차 가능한 매장' 같은 것을 입력할 수 있습니다. 입력된 문장을 분석하여 중요한 단어들(명사)을 추출합니다. 이 과정에서 '스타벅스', '매장' 같은 불필요한 단어는 제거합니다.

### 4. 데이터 필터링

사용자의 요구사항에 맞춰 매장 데이터를 필터링합니다. 예를 들어, 사용자가 '서울시'를 입력하면 서울시에 위치한 매장만을 선택합니다. 이 필터링 과정은 매장 유형, 위치, 시설 등 다양한 기준에 따라 이루어집니다.

약 200개 정도의 필터링 변수들 활용. 이에 따른 필터링 후, 추천 모델에게 보내지는 데이터 양을 축소화 하여 계산을 더 빠르게 한다.

### 5. 유사도 계산

각 매장이 사용자 요구사항과 얼마나 일치하는지를 계산합니다. 매장의 특징을 나타내는 단어들과 사용자가 입력한 단어들을 비교하여 유사성을 평가합니다. 이 과정에서 유사도가 높은 매장일수록 더 높은 점수를 받게 됩니다. 이 점수는 매장의 특징과 사용자의 요구사항이 얼마나 일치하는지를 나타냅니다.

단어의 유사도가 99% 이상인 단어들만 선별하여 점수에 계산

### 6. 점수 계산 및 매장 추천

모든 매장의 점수를 계산한 후, 점수가 높은 순서대로 매장을 정렬합니다. 그리고 상위 n개의 매장(최대 매장 수정가능)을 추천합니다. 이 과정에서 각 매장의 점수가 계산될 때마다 진행 상황을 중간 중간 확인할 수 있습니다.

수정가능한 항목

- 사용자의 입력 형태소 분석기 출력시 사용되는 불용어
- 사용자의 입력(명사) 들과의 키워드 유사도 범위
- 출력되는 매장들의 최대 개수

# 전체 구현 방법

---

**1. 데이터 수집:**
전국의 스타벅스 매장을 대상으로 네이버에서 검색하여, 상위 10개의 블로그 본문을 크롤링했습니다. 크롤링한 파일은 전처리 후 삭제하였습니다. 이로 인해 각 매장에 대한 다양한 후기와 정보를 확보할 수 있었습니다.

**2. 데이터 전처리:**
크롤링된 본문을 형태소 분석기를 사용해 명사만 추출했습니다. 이후, 추출된 명사들의 빈도를 세어 딕셔너리 형태로 저장했습니다. 이 딕셔너리는 단어를 키로, 해당 단어의 빈도를 값으로 갖습니다.

**3. 불용어 처리 및 데이터 정제:**
추천 모델의 정확성을 높이기위해서 글자 수가 1개인 단어와 본문에서 단 한 번만 언급된 단어와 '스타벅스', '스타', '벅스', '스벅', '카페', '매장' 등의 단어를 불용어로 설정하여 삭제했습니다. 

**4. 데이터 통합:**
정제된 데이터를 기반으로, 팀 프로젝트에서 축적한 전국 스타벅스 매장별 특징 데이터와 결합하여 하나의 통합 데이터를 생성했습니다. 이 데이터는 각 매장의 특성과 관련된 다양한 정보를 포함하고 있습니다.

**5. 추천 모델 구현:**
언어 모델로 koBERT를 사용했습니다. 사용자의 입력을 받아 형태소 분석기로 명사만 추출하고, 앞서 설정한 불용어를 동일하게 처리했습니다.

**6. 점수 계산:**
명사화된 사용자의 입력과 매장별 명사들을 koBERT 모델을 사용해 99% 유사한 명사로 변환하고, 이 명사들의 빈도를 기반으로 점수를 계산했습니다. 매장의 본문에서 많이 언급된 단어일수록 높은 점수를 부여하여 추천 모델에 반영했습니다.

**7. 매장 추천:**
최종적으로 합산된 점수를 기준으로, 가장 높은 점수를 받은 매장을 추천하도록 모델을 구성했습니다.

이러한 과정을 통해, 사용자에게 가장 적합한 스타벅스 매장을 추천하는 모델을 구현하였습니다

---

아쉬운점

- 각 명사 별 빈도수를 그대로 점수로 사용하지않고, 매장별 명사 백분위로 계산하여 점수를 정규화 했다면 각 매장의 특정 명사의 점수가 극단적인 점수를 갖지 않았을 것
- 모델은 명사 위주로 검색하게 되므로, 긍정과 부정의 의사를 완벽히 판단할 수 없었다는 점
